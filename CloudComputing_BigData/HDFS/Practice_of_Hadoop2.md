# Practice of Hadoop2

### HDFS 기본 명령어

- 하둡은 사용자가 HDFS를 쉽게 제어할 수 있도록 **쉘 명령어(FileSystemShell: fs shell)**를 제공



#### 명령어 도움말 보기

- `# ./bin/hadoop fs -help`

#### 파일 목록 보기

- `# ./bin/hadoop fs –ls`
  - 파일 및 디렉토리의 권한 정보, 소유자, 소유 그룹, 생성일자, 바이트 수 등을 확인 가능
- `# ./bin/hadoop fs –lsr`
  - 현재 디렉토리의 하위 디렉토리 정보까지 출력

#### 파일 용량 확인

- `# ./bin/hadoop fs –du`
  - 지정한 디렉토리나 파일의 사용량을 확인(바이트 단위로 출력)
- `# ./bin/hadoop fs –dus`
  - 전체 합계 용량만 출력

#### 파일 내용 보기

- `# ./bin/hadoop fs -cat [File Name]`
  - 지정한 파일의 내용을 화면에 출력
  - cat 명령어는 텍스트 파일만 출력 가능
- `# ./bin/hadoop fs -text [File Name]`
  - 지정한 파일의 내용을 화면에 출력
  - text 명령어는 zip 파일 형태로 압축된 파일도 텍스트 화면 으로 출력

#### 디렉토리 생성

- `# ./bin/hadoop fs -mkdir [Directory Name]`
  - 지정한 경로에 디렉토리를 생성

#### 파일 복사

- **Local -> HDFS**
  - `# ./bin/hadoop fs -put [로컬 디렉토리|파일 …] [HDFS 목적지 디렉토리|파일]`
    - **지정한 로컬 파일 시스템의 파일 및 디렉토리를 HDFS로 복사**
  - `# ./bin/hadoop fs –copyFromLocal [로컬 디렉토리|파일 …] [HDFS 목적지 디렉토리|파일]`
    - put 명령어와 동일한 기능을 제공

- **HDFS -> Local**
  - `# ./bin/hadoop fs -get [HDFS 디렉토리|파일 …] [로컬 목적지 디렉토리|파일]`
    - **HDFS에 저장된 데이터를 로컬 파일 시스템으로 복사**
    - 체크섬(checksum)을 숨김 파일로 저장하고 해당 파일을 조회할 때 체크섬을 이용하여 무결성을 확인
  - `# ./bin/hadoop fs -copyToLocal [HDFS 디렉토리|파일 …] [로컬 목적지 디렉토리|파일]`
    - get 명령어와 동일한 기능을 제공
  - `# ./bin/hadoop fs -getmerge [HDFS 디렉토리|파일 …] [로컬 목적지 디렉토리|파일]`
    - 지정한 경로에 있는 **모든 파일의 내용을 합친 후**, 로컬 파일 시스템에 **단 하나의 파일로 복사**

- **HDFS -> HDFS**
  - `# ./bin/hadoop fs -cp [HDFS 디렉토리|파일 …] [HDFS 목적지 디렉토리|파일]`
    - 지정한 소스 디렉토리 및 파일을 목적지 경로로 복사**(HDFS)**

#### 파일 이동

- `# ./bin/hadoop fs -mv [HDFS 디렉토리|파일 …] [HDFS 목적지 디렉토리|파일]`
  - 소스 디렉토리 및 파일을 목적지 경로로 이동
- `# ./bin/hadoop fs -moveFromLocal [로컬 디렉토리|파일 …] [HDFS 목적지 디렉토리|파일]`
  - put 명령어와 동일하게 작동하지만 **로컬 파일 시스템에서 HDFS 로 파일이 복사된 후 소스 경로의 파일은 삭제**

#### 파일 삭제

- `# ./bin/hadoop fs -rm [디렉토리|파일]`
  - 지정한 디렉토리나 파일을 삭제
  - **디렉토리는 반드시 비어있는 경우에만 가능**
- `# ./bin/hadoop fs -rmr [디렉토리|파일]`
  - 비어있지 않은 디렉토리도 삭제 가능

#### 파일의 마지막 내용 확인

- `# ./bin/hadoop fs -tail [파일명]`
  - 지정한 파일의 마지막 1KB에 해당하는 내용을 출력

#### 권한 변경

- `# ./bin/hadoop fs -chmod [권한] [경로]`
  - 지정한 경로에 대한 권한을 변경
  - 해당 파일의 소유자이거나 슈퍼유저일 때만 수정 가능
  - `-R` 옵션을 사용할 경우 재귀적으로 실행
- `# ./bin/hadoop fs -chown [목적 사용자] [디렉토리|파일]`
  - 지정한 파일과 디렉토리에 대한 소유권을 변경
  - `-R` 옵션을 사용할 경우 재귀적으로 실행
- `# ./bin/hadoop fs -chgrp [목적 그룹] [디렉토리|파일]`
  - 지정한 파일과 디렉토리에 대한 소유권 그룹만 변경
  - `-R` 옵션을 사용할 경우 재귀적으로 실행
- 파일 소유자 또는 그룹이 실제로 존재할 필요는 없음
- 리눅스와 다르게 UID, GID개념이 없음